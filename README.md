![Logo](./Resources/Logo.png)

## RoadMap

### Основные компоненты
- Lexer -> Готов
- Parser -> В процессе
- Interpreter -> Не начат

- Перевод на C++ -> Не начат

### Запланированные идеологические преимущества по сравнению со Swift (в т.ч. почерпнутые из JS):
- Многофункциональный интерпретатор
   - Локальные экземпляры внутри кода (песочницы), с возможной передачей контекста
   - Уровни метапрограммирования: полное редактирование, частичное редактирование, частичное чтение, нет
   - Использование кастомных функций в песочницах, таких как import(), print() и т.д.
   - Исполнение по предельному уровню ошибок (допущение или не- вольного синтаксиса)
   - Отладочная консоль для просмотра и действий с памятью (в виде окна с иерархией объектов и строкой ввода)
- Метапрограммирование (расширенное взаимодействие с объектами во время исполнения вне отладки)
   - Чтение и изменение внутренних свойств, недоступное обычными путями: список наследственности, количество retain'ов, переключение типа 'class' на 'enum', у полей уровня доступа 'private' на 'public', и т.п.
   - Получение вызывающего объекта из области видимости функции
- Тип объекта namespace
- Опциональная типизация переменных

## Спецификация

### Типы

#### Объекты

В Root отдаётся предпочтение объёктной ориентированности, поэтому большая часть типов является объектами.

| Название          | Member'ы           | Наследуемость | Вызываемость | Копируемость |
|-------------------|--------------------|---------------|--------------|--------------|
| Класс             | Любые              | Да            | Да           | Нет          |
| Перечисление      | Без операторов     | Нет           | Нет          | Да           |
| Пространство имён | Без операторов     | Нет           | Нет          | Нет          |
| Протокол          | Только определения | Нет           | Нет          | Нет          |
| Структура         | Любые              | Нет           | Да           | Да           |
| Функция           | Предопределённые   | Нет           | Да           | Нет          |

В общем случае в качестве member'ов объектов могут выступать как обычные переменные, так и все вышеперечисленные объекты.

Каждый объект внутренне организуется сложнее, чем отображается в коде. Для взаимодействия с сырым представлением предназначен member metaObject.

#### Примитивы

К примитивам относятся `string`, `int`, `float` и `bool`. Переменные и константы примитивных типов инициализируются неявно и передаются копированием значений, а операторы действий над ними не могут быть переопределены.

### Синтаксис

#### Объявления

Любое объявление создаёт member внутри объекта, в котором оно выполнено.

##### Переменные и константы

Переменные и константы объявляются ключевыми словами `var` и `const`.

```
var <Переменная или константа>

<Переменная или константа> = <Идентификатор>[: <Тип>][ = <Значение>][, <Переменная или константа>]
```

Значением переменной или константы может быть примитив или ссылка на объект.

Любая переменная и константа также может "содержать" `nil` (ничего), если её тип или один из типов указан со знаком `?` на конце. В противном случае она обязана содержать значение на момент интерпретации объявления. Это относится и к функциям - нельзя передать аргумент `nil` в обязательный параметр, и нельзя отдать `nil` как обязательное возвратное значение. Аналогичным образом запрещается вставка `nil`-значений и записей, содержащих `nil`-ключи и/или значения, в массивы и словари с обязательными типами содержания соответственно. При этом, полное отсутствие значений и записей в таких массивах и словарях не запрещается.

```
var empty                                            Пустая переменная с необязательным значением любого типа
var testingVariable = 1                              Переменная с необязательным значением любого типа, инициализируемая со значением Integer(1)
var testingVariable: _? = 1

const firstConstant = Number.Pi,                     Две константы с разными типами значений: любым-необязательным и строковым
      secondConstant: String = 'Example of a string'
```

#### Указание типов

```
_                      Любой тип, включая примитивы, объекты, и функции
                       Предназначен для использования в местах, где указание типа синтаксически необходимо
                       Технически позволяет избежать проверок типа при присваивании переменной

any                    Любой примитив

Any                    Любой объект

()                     Любая функция
(_?... -> _?)
(-> _)                 Функция без параметров с возвратным значением любого типа
(int & Number -> bool) Функция с двумя параметрами типа int и Number соответственно и возвратным типом bool

[]                     Любой массив
[_?]
Array
Array<_?>
[_]                    Массив со значениями любого типа
Array<_>

[:]                    Любой словарь
[_?: _?]
Dictionary
Dictionary<_?: _?>
[_: _]                 Словарь с ключами и значениями любого типа
Dictionary<_, _>
[String: _]            Словарь с ключами типа String и значениями любого типа
Dictionary<String, _>
```

#### Удаление

Ключевое слово `delete` производит попытку удаления member'а из объекта.

```
delete <Путь к member'у>

<Путь к member'у> = <Идентификатор>[.<Путь к member'у>]
```

```
delete variable          Удаление из объекта области видимости
delete instance.variable Удаление из другого объекта
```